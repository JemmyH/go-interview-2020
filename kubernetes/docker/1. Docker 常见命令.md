>   `Docker`组成：**Docker Client客户端、Docker Daemon 守护进程、Docker Image 镜像、Docker Container容器、Docker Registry仓库**。

### 1. Docker架构

>    Docker Client(客户端)、Docker Daemon(守护进程)

`Docker`采用`C/S`架构，其中`Docker Daemon`扮演的是“服务端”，而`Docker Client`扮演的是“客户端”。Client通过 `RESTful API`来请求Daemon来管理docker的镜像和容器。

**Docker daemon** 是一个常驻后台的系统进程，所谓“运行 docker”，指的就是运行 Docker daemon，其作用主要有以下两点：

-   接受并处理 Docker Client 发送的请求
-   管理所有的 Docker containers 和 Docker images

**Docker client** 是给用户和 Docker daemon 建立通信的客户端，安装了 docker 之后，二进制文件 `docker` 就是 Docker client，与 Docker daemon 交互，实现对 Docker image 和 container 的管理请求。

### 2. 一些概念

##### 镜像(image)

一个特殊的文件系统，镜像中不包含任何动态数据，其内容在容器构建之后也不会改变。

##### 容器(container)

**容器**是**镜像**的运行时，容器可以被 **创建、启动、暂停、停止、删除**等。

##### 仓库(registry)

仓库是我们存放镜像和拉去镜像的地方。分为公有仓库(Docker hub)和私有仓库。

### 3. 基本命令

**查看docker版本信息**

```bash
docker version # 输出版本信息
docker info    # 输出更详细的信息
```

**搜索镜像**

```bash
docker search 镜像名
# 如 docker search ubuntu
```

**下载镜像**

```bash
docker pull 用户名/镜像名
# 如 docker pull mysql 官方版本省略用户名
# docker pull tutum/mysql 拉去tutum用户的mysql镜像
```

**创建镜像(通过Dockerfile)**

```bash
docker build 
```

**启动容器**

```bash
docker run 用户名/镜像名 [命令...]
# 如 在后台启动mysql容器(--name指定了容器的名称，方便之后进入容器的命令行，MYSQL_ROOT_PASSWORD=root指定了mysql的root密码，-d表示在后台运行)
docker run --name=mysql -it -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql
```

**在一个容器中执行命令**

```bash
docker exec [OPTIONS] 镜像名 [命令...] [参数...]
# 如 进入上面启动的 mysql容器
docker exec -it mysql bash 
# [options]可选值
# -d : 分离模式: 在后台运行
# -i :  即使没有附加也保持STDIN 打开
# -t : 分配一个伪终端

# 此时相当于已经进去了容器，正常登陆mysql即可运行
mysql -uroot -p
```

**查看当前正在运行的容器**

```bash
docker ps
```

**查看已有的镜像**

```bash
docker image ls 或者 docker images
```

**上传自己镜像到Docker Hub**

```bash
# 先去Docker Hub申请一个账号

docker login # 登录Docker Hub
docker images #查看本地镜像
docker tag <镜像名> <用户名/镜像名> #将镜像转让我的账号下
docker push <用户名>/<镜像名>
```



